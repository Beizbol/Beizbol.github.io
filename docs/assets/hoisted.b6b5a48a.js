import"./Theme.astro_astro_type_script_index_0_lang.84aacc82.js";class P extends Error{constructor(t){super(t),this.name="UpstashError"}}function T(n){const t=Array.isArray(n)?n.map(e=>{try{return T(e)}catch{return e}}):JSON.parse(n);return typeof t=="number"&&t.toString()!=n?n:t}function hr(n){try{return T(n)}catch{return n}}const br=n=>{switch(typeof n){case"string":case"number":case"boolean":return n;default:return JSON.stringify(n)}};class s{constructor(t,e){Object.defineProperty(this,"command",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"deserialize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.serialize=br,this.deserialize=typeof e?.automaticDeserialization>"u"||e.automaticDeserialization?e?.deserialize??hr:r=>r,this.command=t.map(r=>this.serialize(r))}async exec(t){const{result:e,error:r}=await t.request({body:this.command});if(r)throw new P(r);if(typeof e>"u")throw new Error("Request did not return a result");return this.deserialize(e)}}class R extends s{constructor(t,e){super(["append",...t],e)}}class _ extends s{constructor([t,e,r],i){const u=["bitcount",t];typeof e=="number"&&u.push(e),typeof r=="number"&&u.push(r),super(u,i)}}class N extends s{constructor(t,e){super(["bitop",...t],e)}}class J extends s{constructor(t,e){super(["bitpos",...t],e)}}class L extends s{constructor(t){super(["dbsize"],t)}}class U extends s{constructor(t,e){super(["decr",...t],e)}}class k extends s{constructor(t,e){super(["decrby",...t],e)}}class I extends s{constructor(t,e){super(["del",...t],e)}}class H extends s{constructor(t,e){super(["echo",...t],e)}}class D extends s{constructor([t,e,r],i){super(["eval",t,e.length,...e,...r??[]],i)}}class M extends s{constructor([t,e,r],i){super(["evalsha",t,e.length,...e,...r??[]],i)}}class B extends s{constructor(t,e){super(["exists",...t],e)}}class $ extends s{constructor(t,e){super(["expire",...t],e)}}class Z extends s{constructor(t,e){super(["expireat",...t],e)}}class G extends s{constructor(t,e){const r=["flushall"];t&&t.length>0&&t[0].async&&r.push("async"),super(r,e)}}class F extends s{constructor([t],e){const r=["flushdb"];t?.async&&r.push("async"),super(r,e)}}class X extends s{constructor(t,e){super(["get",...t],e)}}class K extends s{constructor(t,e){super(["getbit",...t],e)}}class W extends s{constructor(t,e){super(["getdel",...t],e)}}class Y extends s{constructor(t,e){super(["getrange",...t],e)}}class V extends s{constructor(t,e){super(["getset",...t],e)}}class Q extends s{constructor(t,e){super(["hdel",...t],e)}}class q extends s{constructor(t,e){super(["hexists",...t],e)}}class ee extends s{constructor(t,e){super(["hget",...t],e)}}function mr(n){if(n.length===0)return null;const t={};for(;n.length>=2;){const e=n.shift(),r=n.shift();try{t[e]=JSON.parse(r)}catch{t[e]=r}}return t}class te extends s{constructor(t,e){super(["hgetall",...t],{deserialize:r=>mr(r),...e})}}class re extends s{constructor(t,e){super(["hincrby",...t],e)}}class ne extends s{constructor(t,e){super(["hincrbyfloat",...t],e)}}class ie extends s{constructor([t],e){super(["hkeys",t],e)}}class se extends s{constructor(t,e){super(["hlen",...t],e)}}function pr(n,t){if(t.length===0||t.every(r=>r===null))return null;const e={};for(let r=0;r<n.length;r++)try{e[n[r]]=JSON.parse(t[r])}catch{e[n[r]]=t[r]}return e}class ue extends s{constructor([t,...e],r){super(["hmget",t,...e],{deserialize:i=>pr(e,i),...r})}}class ae extends s{constructor([t,e],r){super(["hmset",t,...Object.entries(e).flatMap(([i,u])=>[i,u])],r)}}function dr(n){if(n.length===0)return null;const t={};for(;n.length>=2;){const e=n.shift(),r=n.shift();try{t[e]=JSON.parse(r)}catch{t[e]=r}}return t}class ce extends s{constructor(t,e){const r=["hrandfield",t[0]];typeof t[1]=="number"&&r.push(t[1]),t[2]&&r.push("WITHVALUES"),super(r,{deserialize:t[2]?i=>dr(i):e?.deserialize,...e})}}class oe extends s{constructor([t,e,r],i){const u=["hscan",t,e];r?.match&&u.push("match",r.match),typeof r?.count=="number"&&u.push("count",r.count),super(u,i)}}class le extends s{constructor([t,e],r){super(["hset",t,...Object.entries(e).flatMap(([i,u])=>[i,u])],r)}}class he extends s{constructor(t,e){super(["hsetnx",...t],e)}}class be extends s{constructor(t,e){super(["hstrlen",...t],e)}}class me extends s{constructor(t,e){super(["hvals",...t],e)}}class pe extends s{constructor(t,e){super(["incr",...t],e)}}class de extends s{constructor(t,e){super(["incrby",...t],e)}}class fe extends s{constructor(t,e){super(["incrbyfloat",...t],e)}}class we extends s{constructor(t,e){super(["JSON.ARRAPPEND",...t],e)}}class xe extends s{constructor(t,e){super(["JSON.ARRINDEX",...t],e)}}class ye extends s{constructor(t,e){super(["JSON.ARRINSERT",...t],e)}}class Oe extends s{constructor(t,e){super(["JSON.ARRLEN",t[0],t[1]??"$"],e)}}class ge extends s{constructor(t,e){super(["JSON.ARRPOP",...t],e)}}class ve extends s{constructor(t,e){const r=t[1]??"$",i=t[2]??0,u=t[3]??0;super(["JSON.ARRTRIM",t[0],r,i,u],e)}}class Pe extends s{constructor(t,e){super(["JSON.CLEAR",...t],e)}}class je extends s{constructor(t,e){super(["JSON.DEL",...t],e)}}class Ce extends s{constructor(t,e){super(["JSON.FORGET",...t],e)}}class Se extends s{constructor(t,e){const r=["JSON.GET"];typeof t[1]=="string"?r.push(...t):(r.push(t[0]),t[1]&&(t[1].indent&&r.push("INDENT",t[1].indent),t[1].newline&&r.push("NEWLINE",t[1].newline),t[1].space&&r.push("SPACE",t[1].space)),r.push(...t.slice(2))),super(r,e)}}class Ee extends s{constructor(t,e){super(["JSON.MGET",...t[0],t[1]],e)}}class ze extends s{constructor(t,e){super(["JSON.NUMINCRBY",...t],e)}}class Ae extends s{constructor(t,e){super(["JSON.NUMMULTBY",...t],e)}}class Te extends s{constructor(t,e){super(["JSON.OBJKEYS",...t],e)}}class Re extends s{constructor(t,e){super(["JSON.OBJLEN",...t],e)}}class _e extends s{constructor(t,e){super(["JSON.RESP",...t],e)}}class Ne extends s{constructor(t,e){const r=["JSON.SET",t[0],t[1],t[2]];t[3]&&(t[3].nx?r.push("NX"):t[3].xx&&r.push("XX")),super(r,e)}}class Je extends s{constructor(t,e){super(["JSON.STRAPPEND",...t],e)}}class Le extends s{constructor(t,e){super(["JSON.STRLEN",...t],e)}}class Ue extends s{constructor(t,e){super(["JSON.TOGGLE",...t],e)}}class ke extends s{constructor(t,e){super(["JSON.TYPE",...t],e)}}class Ie extends s{constructor(t,e){super(["keys",...t],e)}}class He extends s{constructor(t,e){super(["lindex",...t],e)}}class De extends s{constructor(t,e){super(["linsert",...t],e)}}class Me extends s{constructor(t,e){super(["llen",...t],e)}}class Be extends s{constructor(t,e){super(["lmove",...t],e)}}class $e extends s{constructor(t,e){super(["lpop",...t],e)}}class Ze extends s{constructor(t,e){const r=["lpos",t[0],t[1]];typeof t[2]?.rank=="number"&&r.push("rank",t[2].rank),typeof t[2]?.count=="number"&&r.push("count",t[2].count),typeof t[2]?.maxLen=="number"&&r.push("maxLen",t[2].maxLen),super(r,e)}}class Ge extends s{constructor(t,e){super(["lpush",...t],e)}}class Fe extends s{constructor(t,e){super(["lpushx",...t],e)}}class Xe extends s{constructor(t,e){super(["lrange",...t],e)}}class Ke extends s{constructor(t,e){super(["lrem",...t],e)}}class We extends s{constructor(t,e){super(["lset",...t],e)}}class Ye extends s{constructor(t,e){super(["ltrim",...t],e)}}class Ve extends s{constructor(t,e){super(["mget",...t],e)}}class Qe extends s{constructor([t],e){super(["mset",...Object.entries(t).flatMap(([r,i])=>[r,i])],e)}}class qe extends s{constructor([t],e){super(["msetnx",...Object.entries(t).flatMap(r=>r)],e)}}class et extends s{constructor(t,e){super(["persist",...t],e)}}class tt extends s{constructor(t,e){super(["pexpire",...t],e)}}class rt extends s{constructor(t,e){super(["pexpireat",...t],e)}}class nt extends s{constructor(t,e){const r=["ping"];typeof t<"u"&&typeof t[0]<"u"&&r.push(t[0]),super(r,e)}}class it extends s{constructor(t,e){super(["psetex",...t],e)}}class st extends s{constructor(t,e){super(["pttl",...t],e)}}class ut extends s{constructor(t,e){super(["publish",...t],e)}}class at extends s{constructor(t){super(["randomkey"],t)}}class ct extends s{constructor(t,e){super(["rename",...t],e)}}class ot extends s{constructor(t,e){super(["renamenx",...t],e)}}class lt extends s{constructor(t,e){super(["rpop",...t],e)}}class ht extends s{constructor(t,e){super(["rpush",...t],e)}}class bt extends s{constructor(t,e){super(["rpushx",...t],e)}}class mt extends s{constructor(t,e){super(["sadd",...t],e)}}class pt extends s{constructor([t,e],r){const i=["scan",t];e?.match&&i.push("match",e.match),typeof e?.count=="number"&&i.push("count",e.count),e?.type&&e.type.length>0&&i.push("type",e.type),super(i,r)}}class dt extends s{constructor(t,e){super(["scard",...t],e)}}class ft extends s{constructor(t,e){super(["script","exists",...t],{deserialize:r=>r,...e})}}class wt extends s{constructor([t],e){const r=["script","flush"];t?.sync?r.push("sync"):t?.async&&r.push("async"),super(r,e)}}class xt extends s{constructor(t,e){super(["script","load",...t],e)}}class yt extends s{constructor(t,e){super(["sdiff",...t],e)}}class Ot extends s{constructor(t,e){super(["sdiffstore",...t],e)}}class gt extends s{constructor([t,e,r],i){const u=["set",t,e];r&&("nx"in r&&r.nx?u.push("nx"):"xx"in r&&r.xx&&u.push("xx"),"get"in r&&r.get&&u.push("get"),"ex"in r&&typeof r.ex=="number"?u.push("ex",r.ex):"px"in r&&typeof r.px=="number"?u.push("px",r.px):"exat"in r&&typeof r.exat=="number"?u.push("exat",r.exat):"pxat"in r&&typeof r.pxat=="number"?u.push("pxat",r.pxat):"keepTtl"in r&&r.keepTtl&&u.push("keepTtl",r.keepTtl)),super(u,i)}}class vt extends s{constructor(t,e){super(["setbit",...t],e)}}class Pt extends s{constructor(t,e){super(["setex",...t],e)}}class jt extends s{constructor(t,e){super(["setnx",...t],e)}}class Ct extends s{constructor(t,e){super(["setrange",...t],e)}}class St extends s{constructor(t,e){super(["sinter",...t],e)}}class Et extends s{constructor(t,e){super(["sinterstore",...t],e)}}class zt extends s{constructor(t,e){super(["sismember",...t],e)}}class At extends s{constructor(t,e){super(["smembers",...t],e)}}class Tt extends s{constructor(t,e){super(["smismember",t[0],...t[1]],e)}}class Rt extends s{constructor(t,e){super(["smove",...t],e)}}class _t extends s{constructor([t,e],r){const i=["spop",t];typeof e=="number"&&i.push(e),super(i,r)}}class Nt extends s{constructor([t,e],r){const i=["srandmember",t];typeof e=="number"&&i.push(e),super(i,r)}}class Jt extends s{constructor(t,e){super(["srem",...t],e)}}class Lt extends s{constructor([t,e,r],i){const u=["sscan",t,e];r?.match&&u.push("match",r.match),typeof r?.count=="number"&&u.push("count",r.count),super(u,i)}}class Ut extends s{constructor(t,e){super(["strlen",...t],e)}}class kt extends s{constructor(t,e){super(["sunion",...t],e)}}class It extends s{constructor(t,e){super(["sunionstore",...t],e)}}class Ht extends s{constructor(t){super(["time"],t)}}class Dt extends s{constructor(t,e){super(["touch",...t],e)}}class Mt extends s{constructor(t,e){super(["ttl",...t],e)}}class Bt extends s{constructor(t,e){super(["type",...t],e)}}class $t extends s{constructor(t,e){super(["unlink",...t],e)}}class y extends s{constructor([t,e,...r],i){const u=["zadd",t];"nx"in e&&e.nx?u.push("nx"):"xx"in e&&e.xx&&u.push("xx"),"ch"in e&&e.ch&&u.push("ch"),"incr"in e&&e.incr&&u.push("incr"),"score"in e&&"member"in e&&u.push(e.score,e.member),u.push(...r.flatMap(({score:a,member:o})=>[a,o])),super(u,i)}}class Zt extends s{constructor(t,e){super(["zcard",...t],e)}}class Gt extends s{constructor(t,e){super(["zcount",...t],e)}}class Ft extends s{constructor(t,e){super(["zincrby",...t],e)}}class Xt extends s{constructor([t,e,r,i],u){const a=["zinterstore",t,e];Array.isArray(r)?a.push(...r):a.push(r),i&&("weights"in i&&i.weights?a.push("weights",...i.weights):"weight"in i&&typeof i.weight=="number"&&a.push("weights",i.weight),"aggregate"in i&&a.push("aggregate",i.aggregate)),super(a,u)}}class Kt extends s{constructor(t,e){super(["zlexcount",...t],e)}}class Wt extends s{constructor([t,e],r){const i=["zpopmax",t];typeof e=="number"&&i.push(e),super(i,r)}}class Yt extends s{constructor([t,e],r){const i=["zpopmin",t];typeof e=="number"&&i.push(e),super(i,r)}}class Vt extends s{constructor([t,e,r,i],u){const a=["zrange",t,e,r];i?.byScore&&a.push("byscore"),i?.byLex&&a.push("bylex"),i?.rev&&a.push("rev"),typeof i?.count<"u"&&typeof i?.offset<"u"&&a.push("limit",i.offset,i.count),i?.withScores&&a.push("withscores"),super(a,u)}}class Qt extends s{constructor(t,e){super(["zrank",...t],e)}}class qt extends s{constructor(t,e){super(["zrem",...t],e)}}class er extends s{constructor(t,e){super(["zremrangebylex",...t],e)}}class tr extends s{constructor(t,e){super(["zremrangebyrank",...t],e)}}class rr extends s{constructor(t,e){super(["zremrangebyscore",...t],e)}}class nr extends s{constructor(t,e){super(["zrevrank",...t],e)}}class ir extends s{constructor([t,e,r],i){const u=["zscan",t,e];r?.match&&u.push("match",r.match),typeof r?.count=="number"&&u.push("count",r.count),super(u,i)}}class sr extends s{constructor(t,e){super(["zscore",...t],e)}}class ur extends s{constructor([t,e,r,i],u){const a=["zunionstore",t,e];Array.isArray(r)?a.push(...r):a.push(r),i&&("weights"in i&&i.weights?a.push("weights",...i.weights):"weight"in i&&typeof i.weight=="number"&&a.push("weights",i.weight),"aggregate"in i&&a.push("aggregate",i.aggregate)),super(a,u)}}class ar extends s{constructor(t,e){const[r,i]=t;super(["zmscore",r,...i],e)}}class cr extends s{constructor(t,e){super(["zdiffstore",...t],e)}}class S{constructor(t){Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"commands",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"commandOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"multiExec",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exec",{enumerable:!0,configurable:!0,writable:!0,value:async()=>{if(this.commands.length===0)throw new Error("Pipeline is empty");const e=this.multiExec?["multi-exec"]:["pipeline"];return(await this.client.request({path:e,body:Object.values(this.commands).map(i=>i.command)})).map(({error:i,result:u},a)=>{if(i)throw new P(`Command ${a+1} [ ${this.commands[a].command[0]} ] failed: ${i}`);return this.commands[a].deserialize(u)})}}),Object.defineProperty(this,"append",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new R(e,this.commandOptions))}),Object.defineProperty(this,"bitcount",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new _(e,this.commandOptions))}),Object.defineProperty(this,"bitop",{enumerable:!0,configurable:!0,writable:!0,value:(e,r,i,...u)=>this.chain(new N([e,r,i,...u],this.commandOptions))}),Object.defineProperty(this,"bitpos",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new J(e,this.commandOptions))}),Object.defineProperty(this,"zdiffstore",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new cr(e,this.commandOptions))}),Object.defineProperty(this,"dbsize",{enumerable:!0,configurable:!0,writable:!0,value:()=>this.chain(new L(this.commandOptions))}),Object.defineProperty(this,"decr",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new U(e,this.commandOptions))}),Object.defineProperty(this,"decrby",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new k(e,this.commandOptions))}),Object.defineProperty(this,"del",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new I(e,this.commandOptions))}),Object.defineProperty(this,"echo",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new H(e,this.commandOptions))}),Object.defineProperty(this,"eval",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new D(e,this.commandOptions))}),Object.defineProperty(this,"evalsha",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new M(e,this.commandOptions))}),Object.defineProperty(this,"exists",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new B(e,this.commandOptions))}),Object.defineProperty(this,"expire",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new $(e,this.commandOptions))}),Object.defineProperty(this,"expireat",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new Z(e,this.commandOptions))}),Object.defineProperty(this,"flushall",{enumerable:!0,configurable:!0,writable:!0,value:e=>this.chain(new G(e,this.commandOptions))}),Object.defineProperty(this,"flushdb",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new F(e,this.commandOptions))}),Object.defineProperty(this,"get",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new X(e,this.commandOptions))}),Object.defineProperty(this,"getbit",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new K(e,this.commandOptions))}),Object.defineProperty(this,"getdel",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new W(e,this.commandOptions))}),Object.defineProperty(this,"getrange",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new Y(e,this.commandOptions))}),Object.defineProperty(this,"getset",{enumerable:!0,configurable:!0,writable:!0,value:(e,r)=>this.chain(new V([e,r],this.commandOptions))}),Object.defineProperty(this,"hdel",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new Q(e,this.commandOptions))}),Object.defineProperty(this,"hexists",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new q(e,this.commandOptions))}),Object.defineProperty(this,"hget",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new ee(e,this.commandOptions))}),Object.defineProperty(this,"hgetall",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new te(e,this.commandOptions))}),Object.defineProperty(this,"hincrby",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new re(e,this.commandOptions))}),Object.defineProperty(this,"hincrbyfloat",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new ne(e,this.commandOptions))}),Object.defineProperty(this,"hkeys",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new ie(e,this.commandOptions))}),Object.defineProperty(this,"hlen",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new se(e,this.commandOptions))}),Object.defineProperty(this,"hmget",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new ue(e,this.commandOptions))}),Object.defineProperty(this,"hmset",{enumerable:!0,configurable:!0,writable:!0,value:(e,r)=>this.chain(new ae([e,r],this.commandOptions))}),Object.defineProperty(this,"hrandfield",{enumerable:!0,configurable:!0,writable:!0,value:(e,r,i)=>this.chain(new ce([e,r,i],this.commandOptions))}),Object.defineProperty(this,"hscan",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new oe(e,this.commandOptions))}),Object.defineProperty(this,"hset",{enumerable:!0,configurable:!0,writable:!0,value:(e,r)=>this.chain(new le([e,r],this.commandOptions))}),Object.defineProperty(this,"hsetnx",{enumerable:!0,configurable:!0,writable:!0,value:(e,r,i)=>this.chain(new he([e,r,i],this.commandOptions))}),Object.defineProperty(this,"hstrlen",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new be(e,this.commandOptions))}),Object.defineProperty(this,"hvals",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new me(e,this.commandOptions))}),Object.defineProperty(this,"incr",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new pe(e,this.commandOptions))}),Object.defineProperty(this,"incrby",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new de(e,this.commandOptions))}),Object.defineProperty(this,"incrbyfloat",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new fe(e,this.commandOptions))}),Object.defineProperty(this,"keys",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new Ie(e,this.commandOptions))}),Object.defineProperty(this,"lindex",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new He(e,this.commandOptions))}),Object.defineProperty(this,"linsert",{enumerable:!0,configurable:!0,writable:!0,value:(e,r,i,u)=>this.chain(new De([e,r,i,u],this.commandOptions))}),Object.defineProperty(this,"llen",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new Me(e,this.commandOptions))}),Object.defineProperty(this,"lmove",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new Be(e,this.commandOptions))}),Object.defineProperty(this,"lpop",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new $e(e,this.commandOptions))}),Object.defineProperty(this,"lpos",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new Ze(e,this.commandOptions))}),Object.defineProperty(this,"lpush",{enumerable:!0,configurable:!0,writable:!0,value:(e,...r)=>this.chain(new Ge([e,...r],this.commandOptions))}),Object.defineProperty(this,"lpushx",{enumerable:!0,configurable:!0,writable:!0,value:(e,...r)=>this.chain(new Fe([e,...r],this.commandOptions))}),Object.defineProperty(this,"lrange",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new Xe(e,this.commandOptions))}),Object.defineProperty(this,"lrem",{enumerable:!0,configurable:!0,writable:!0,value:(e,r,i)=>this.chain(new Ke([e,r,i],this.commandOptions))}),Object.defineProperty(this,"lset",{enumerable:!0,configurable:!0,writable:!0,value:(e,r,i)=>this.chain(new We([e,r,i],this.commandOptions))}),Object.defineProperty(this,"ltrim",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new Ye(e,this.commandOptions))}),Object.defineProperty(this,"mget",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new Ve(e,this.commandOptions))}),Object.defineProperty(this,"mset",{enumerable:!0,configurable:!0,writable:!0,value:e=>this.chain(new Qe([e],this.commandOptions))}),Object.defineProperty(this,"msetnx",{enumerable:!0,configurable:!0,writable:!0,value:e=>this.chain(new qe([e],this.commandOptions))}),Object.defineProperty(this,"persist",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new et(e,this.commandOptions))}),Object.defineProperty(this,"pexpire",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new tt(e,this.commandOptions))}),Object.defineProperty(this,"pexpireat",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new rt(e,this.commandOptions))}),Object.defineProperty(this,"ping",{enumerable:!0,configurable:!0,writable:!0,value:e=>this.chain(new nt(e,this.commandOptions))}),Object.defineProperty(this,"psetex",{enumerable:!0,configurable:!0,writable:!0,value:(e,r,i)=>this.chain(new it([e,r,i],this.commandOptions))}),Object.defineProperty(this,"pttl",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new st(e,this.commandOptions))}),Object.defineProperty(this,"publish",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new ut(e,this.commandOptions))}),Object.defineProperty(this,"randomkey",{enumerable:!0,configurable:!0,writable:!0,value:()=>this.chain(new at(this.commandOptions))}),Object.defineProperty(this,"rename",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new ct(e,this.commandOptions))}),Object.defineProperty(this,"renamenx",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new ot(e,this.commandOptions))}),Object.defineProperty(this,"rpop",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new lt(e,this.commandOptions))}),Object.defineProperty(this,"rpush",{enumerable:!0,configurable:!0,writable:!0,value:(e,...r)=>this.chain(new ht([e,...r],this.commandOptions))}),Object.defineProperty(this,"rpushx",{enumerable:!0,configurable:!0,writable:!0,value:(e,...r)=>this.chain(new bt([e,...r],this.commandOptions))}),Object.defineProperty(this,"sadd",{enumerable:!0,configurable:!0,writable:!0,value:(e,...r)=>this.chain(new mt([e,...r],this.commandOptions))}),Object.defineProperty(this,"scan",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new pt(e,this.commandOptions))}),Object.defineProperty(this,"scard",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new dt(e,this.commandOptions))}),Object.defineProperty(this,"scriptExists",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new ft(e,this.commandOptions))}),Object.defineProperty(this,"scriptFlush",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new wt(e,this.commandOptions))}),Object.defineProperty(this,"scriptLoad",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new xt(e,this.commandOptions))}),Object.defineProperty(this,"sdiff",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new yt(e,this.commandOptions))}),Object.defineProperty(this,"sdiffstore",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new Ot(e,this.commandOptions))}),Object.defineProperty(this,"set",{enumerable:!0,configurable:!0,writable:!0,value:(e,r,i)=>this.chain(new gt([e,r,i],this.commandOptions))}),Object.defineProperty(this,"setbit",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new vt(e,this.commandOptions))}),Object.defineProperty(this,"setex",{enumerable:!0,configurable:!0,writable:!0,value:(e,r,i)=>this.chain(new Pt([e,r,i],this.commandOptions))}),Object.defineProperty(this,"setnx",{enumerable:!0,configurable:!0,writable:!0,value:(e,r)=>this.chain(new jt([e,r],this.commandOptions))}),Object.defineProperty(this,"setrange",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new Ct(e,this.commandOptions))}),Object.defineProperty(this,"sinter",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new St(e,this.commandOptions))}),Object.defineProperty(this,"sinterstore",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new Et(e,this.commandOptions))}),Object.defineProperty(this,"sismember",{enumerable:!0,configurable:!0,writable:!0,value:(e,r)=>this.chain(new zt([e,r],this.commandOptions))}),Object.defineProperty(this,"smembers",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new At(e,this.commandOptions))}),Object.defineProperty(this,"smismember",{enumerable:!0,configurable:!0,writable:!0,value:(e,r)=>this.chain(new Tt([e,r],this.commandOptions))}),Object.defineProperty(this,"smove",{enumerable:!0,configurable:!0,writable:!0,value:(e,r,i)=>this.chain(new Rt([e,r,i],this.commandOptions))}),Object.defineProperty(this,"spop",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new _t(e,this.commandOptions))}),Object.defineProperty(this,"srandmember",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new Nt(e,this.commandOptions))}),Object.defineProperty(this,"srem",{enumerable:!0,configurable:!0,writable:!0,value:(e,...r)=>this.chain(new Jt([e,...r],this.commandOptions))}),Object.defineProperty(this,"sscan",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new Lt(e,this.commandOptions))}),Object.defineProperty(this,"strlen",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new Ut(e,this.commandOptions))}),Object.defineProperty(this,"sunion",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new kt(e,this.commandOptions))}),Object.defineProperty(this,"sunionstore",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new It(e,this.commandOptions))}),Object.defineProperty(this,"time",{enumerable:!0,configurable:!0,writable:!0,value:()=>this.chain(new Ht(this.commandOptions))}),Object.defineProperty(this,"touch",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new Dt(e,this.commandOptions))}),Object.defineProperty(this,"ttl",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new Mt(e,this.commandOptions))}),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new Bt(e,this.commandOptions))}),Object.defineProperty(this,"unlink",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new $t(e,this.commandOptions))}),Object.defineProperty(this,"zadd",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>"score"in e[1]?this.chain(new y([e[0],e[1],...e.slice(2)],this.commandOptions)):this.chain(new y([e[0],e[1],...e.slice(2)],this.commandOptions))}),Object.defineProperty(this,"zcard",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new Zt(e,this.commandOptions))}),Object.defineProperty(this,"zcount",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new Gt(e,this.commandOptions))}),Object.defineProperty(this,"zincrby",{enumerable:!0,configurable:!0,writable:!0,value:(e,r,i)=>this.chain(new Ft([e,r,i],this.commandOptions))}),Object.defineProperty(this,"zinterstore",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new Xt(e,this.commandOptions))}),Object.defineProperty(this,"zlexcount",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new Kt(e,this.commandOptions))}),Object.defineProperty(this,"zmscore",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new ar(e,this.commandOptions))}),Object.defineProperty(this,"zpopmax",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new Wt(e,this.commandOptions))}),Object.defineProperty(this,"zpopmin",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new Yt(e,this.commandOptions))}),Object.defineProperty(this,"zrange",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new Vt(e,this.commandOptions))}),Object.defineProperty(this,"zrank",{enumerable:!0,configurable:!0,writable:!0,value:(e,r)=>this.chain(new Qt([e,r],this.commandOptions))}),Object.defineProperty(this,"zrem",{enumerable:!0,configurable:!0,writable:!0,value:(e,...r)=>this.chain(new qt([e,...r],this.commandOptions))}),Object.defineProperty(this,"zremrangebylex",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new er(e,this.commandOptions))}),Object.defineProperty(this,"zremrangebyrank",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new tr(e,this.commandOptions))}),Object.defineProperty(this,"zremrangebyscore",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new rr(e,this.commandOptions))}),Object.defineProperty(this,"zrevrank",{enumerable:!0,configurable:!0,writable:!0,value:(e,r)=>this.chain(new nr([e,r],this.commandOptions))}),Object.defineProperty(this,"zscan",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new ir(e,this.commandOptions))}),Object.defineProperty(this,"zscore",{enumerable:!0,configurable:!0,writable:!0,value:(e,r)=>this.chain(new sr([e,r],this.commandOptions))}),Object.defineProperty(this,"zunionstore",{enumerable:!0,configurable:!0,writable:!0,value:(...e)=>this.chain(new ur(e,this.commandOptions))}),this.client=t.client,this.commands=[],this.commandOptions=t.commandOptions,this.multiExec=t.multiExec??!1}chain(t){return this.commands.push(t),this}get json(){return{arrappend:(...t)=>this.chain(new we(t,this.commandOptions)),arrindex:(...t)=>this.chain(new xe(t,this.commandOptions)),arrinsert:(...t)=>this.chain(new ye(t,this.commandOptions)),arrlen:(...t)=>this.chain(new Oe(t,this.commandOptions)),arrpop:(...t)=>this.chain(new ge(t,this.commandOptions)),arrtrim:(...t)=>this.chain(new ve(t,this.commandOptions)),clear:(...t)=>this.chain(new Pe(t,this.commandOptions)),del:(...t)=>this.chain(new je(t,this.commandOptions)),forget:(...t)=>this.chain(new Ce(t,this.commandOptions)),get:(...t)=>this.chain(new Se(t,this.commandOptions)),mget:(...t)=>this.chain(new Ee(t,this.commandOptions)),numincrby:(...t)=>this.chain(new ze(t,this.commandOptions)),nummultby:(...t)=>this.chain(new Ae(t,this.commandOptions)),objkeys:(...t)=>this.chain(new Te(t,this.commandOptions)),objlen:(...t)=>this.chain(new Re(t,this.commandOptions)),resp:(...t)=>this.chain(new _e(t,this.commandOptions)),set:(...t)=>this.chain(new Ne(t,this.commandOptions)),strappend:(...t)=>this.chain(new Je(t,this.commandOptions)),strlen:(...t)=>this.chain(new Le(t,this.commandOptions)),toggle:(...t)=>this.chain(new Ue(t,this.commandOptions)),type:(...t)=>this.chain(new ke(t,this.commandOptions))}}}function E(n){const t=n.length;let e=n.indexOf("=");e===-1&&(e=t);const r=e===t?0:4-e%4;return[e,r]}function fr(n,t,e=!1){function r(a,o){return Math.floor((a+o)*3/4-o)}function i(a){return n[a>>18&63]+n[a>>12&63]+n[a>>6&63]+n[a&63]}function u(a,o,c){const h=new Array((c-o)/3);for(let m=o,l=0;m<c;m+=3)h[l++]=i((a[m]<<16)+(a[m+1]<<8)+a[m+2]);return h.join("")}return{byteLength(a){return r.apply(null,E(a))},toUint8Array(a){const[o,c]=E(a),h=new Uint8Array(r(o,c)),m=c?o-4:o;let l,p=0,b;for(b=0;b<m;b+=4)l=t[a.charCodeAt(b)]<<18|t[a.charCodeAt(b+1)]<<12|t[a.charCodeAt(b+2)]<<6|t[a.charCodeAt(b+3)],h[p++]=l>>16&255,h[p++]=l>>8&255,h[p++]=l&255;return c===2?(l=t[a.charCodeAt(b)]<<2|t[a.charCodeAt(b+1)]>>4,h[p++]=l&255):c===1&&(l=t[a.charCodeAt(b)]<<10|t[a.charCodeAt(b+1)]<<4|t[a.charCodeAt(b+2)]>>2,h[p++]=l>>8&255,h[p++]=l&255),h},fromUint8Array(a){const c=a.length,h=c%3,m=c-h,l=new Array(Math.ceil(m/16383)+(h?1:0));let p=0,b;for(let x=0;x<m;x+=16383)b=x+16383,l[p++]=u(a,x,b>m?m:b);let w;return h===1?(w=a[m],l[p]=n[w>>2]+n[w<<4&63],e||(l[p]+="==")):h===2&&(w=a[m]<<8|a[m+1]&255,l[p]=n[w>>10]+n[w>>4&63]+n[w<<2&63],e||(l[p]+="=")),l.join("")}}}const or=[],lr=[],O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";for(let n=0,t=O.length;n<t;++n)or[n]=O[n],lr[O.charCodeAt(n)]=n;const{byteLength:Rr,toUint8Array:wr,fromUint8Array:xr}=fr(or,lr,!0),yr=new TextDecoder,Or=new TextEncoder;function gr(n){return n.reduce((t,e)=>`${t}${e<16?"0":""}${e.toString(16)}`,"")}function vr(n){const t=n.length;if(t%2||!/^[0-9a-fA-F]+$/.test(n))throw new TypeError("Invalid hex string.");n=n.toLowerCase();const e=new Uint8Array(Math.floor(t/2)),r=t/2;for(let i=0;i<r;++i)e[i]=parseInt(n.substr(i*2,2),16);return e}function Pr(n,t="utf8"){if(/^utf-?8$/i.test(t))return yr.decode(n);if(/^base64$/i.test(t))return xr(n);if(/^hex(?:adecimal)?$/i.test(t))return gr(n);throw new TypeError("Unsupported string encoding.")}function jr(n,t="utf8"){if(/^utf-?8$/i.test(t))return Or.encode(n);if(/^base64$/i.test(t))return wr(n);if(/^hex(?:adecimal)?$/i.test(t))return vr(n);throw new TypeError("Unsupported string encoding.")}function g(n,t){return n<<t|n>>>32-t}const z=20;class j{constructor(){Object.defineProperty(this,"hashSize",{enumerable:!0,configurable:!0,writable:!0,value:z}),Object.defineProperty(this,"_buf",{enumerable:!0,configurable:!0,writable:!0,value:new Uint8Array(64)}),Object.defineProperty(this,"_bufIdx",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_count",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_K",{enumerable:!0,configurable:!0,writable:!0,value:new Uint32Array([1518500249,1859775393,2400959708,3395469782])}),Object.defineProperty(this,"_H",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_finalized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.init()}static F(t,e,r,i){return t<=19?e&r|~e&i:t<=39?e^r^i:t<=59?e&r|e&i|r&i:e^r^i}init(){return this._H=new Uint32Array([1732584193,4023233417,2562383102,271733878,3285377520]),this._bufIdx=0,this._count=new Uint32Array(2),this._buf.fill(0),this._finalized=!1,this}update(t,e){if(t===null)throw new TypeError("msg must be a string or Uint8Array.");typeof t=="string"&&(t=jr(t,e));for(let i=0;i<t.length;i++)this._buf[this._bufIdx++]=t[i],this._bufIdx===64&&(this.transform(),this._bufIdx=0);const r=this._count;return(r[0]+=t.length<<3)<t.length<<3&&r[1]++,r[1]+=t.length>>>29,this}digest(t){if(this._finalized)throw new Error("digest has already been called.");this._finalized=!0;const e=this._buf;let r=this._bufIdx;for(e[r++]=128;r!==56;)r===64&&(this.transform(),r=0),e[r++]=0;const i=this._count;e[56]=i[1]>>>24&255,e[57]=i[1]>>>16&255,e[58]=i[1]>>>8&255,e[59]=i[1]>>>0&255,e[60]=i[0]>>>24&255,e[61]=i[0]>>>16&255,e[62]=i[0]>>>8&255,e[63]=i[0]>>>0&255,this.transform();const u=new Uint8Array(z);for(let a=0;a<5;a++)u[(a<<2)+0]=this._H[a]>>>24&255,u[(a<<2)+1]=this._H[a]>>>16&255,u[(a<<2)+2]=this._H[a]>>>8&255,u[(a<<2)+3]=this._H[a]>>>0&255;return this.init(),t?Pr(u,t):u}transform(){const t=this._H;let e=t[0],r=t[1],i=t[2],u=t[3],a=t[4];const o=new Uint32Array(80);for(let c=0;c<16;c++)o[c]=this._buf[(c<<2)+3]|this._buf[(c<<2)+2]<<8|this._buf[(c<<2)+1]<<16|this._buf[c<<2]<<24;for(let c=0;c<80;c++){c>=16&&(o[c]=g(o[c-3]^o[c-8]^o[c-14]^o[c-16],1));const h=g(e,5)+j.F(c,r,i,u)+a+o[c]+this._K[Math.floor(c/20)]|0;a=u,u=i,i=g(r,30),r=e,e=h}t[0]=t[0]+e|0,t[1]=t[1]+r|0,t[2]=t[2]+i|0,t[3]=t[3]+u|0,t[4]=t[4]+a|0}}function Cr(n,t,e){return new j().update(n,t).digest(e)}class Sr{constructor(t,e){Object.defineProperty(this,"script",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sha1",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"redis",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.redis=t,this.sha1=this.digest(e),this.script=e}async eval(t,e){return await this.redis.eval(this.script,t,e)}async evalsha(t,e){return await this.redis.evalsha(this.sha1,t,e)}async exec(t,e){return await this.redis.evalsha(this.sha1,t,e).catch(async i=>{if(i instanceof Error&&i.message.toLowerCase().includes("noscript"))return await this.redis.eval(this.script,t,e);throw i})}digest(t){const e=Cr(t,"utf8","hex");return typeof e=="string"?e:new TextDecoder().decode(e)}}let Er=class{constructor(t,e){Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"opts",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"enableTelemetry",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"use",{enumerable:!0,configurable:!0,writable:!0,value:r=>{const i=this.client.request.bind(this.client);this.client.request=u=>r(u,i)}}),Object.defineProperty(this,"addTelemetry",{enumerable:!0,configurable:!0,writable:!0,value:r=>{if(this.enableTelemetry)try{this.client.mergeTelemetry(r)}catch{}}}),Object.defineProperty(this,"pipeline",{enumerable:!0,configurable:!0,writable:!0,value:()=>new S({client:this.client,commandOptions:this.opts,multiExec:!1})}),Object.defineProperty(this,"multi",{enumerable:!0,configurable:!0,writable:!0,value:()=>new S({client:this.client,commandOptions:this.opts,multiExec:!0})}),Object.defineProperty(this,"append",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new R(r,this.opts).exec(this.client)}),Object.defineProperty(this,"bitcount",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new _(r,this.opts).exec(this.client)}),Object.defineProperty(this,"bitop",{enumerable:!0,configurable:!0,writable:!0,value:(r,i,u,...a)=>new N([r,i,u,...a],this.opts).exec(this.client)}),Object.defineProperty(this,"bitpos",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new J(r,this.opts).exec(this.client)}),Object.defineProperty(this,"dbsize",{enumerable:!0,configurable:!0,writable:!0,value:()=>new L(this.opts).exec(this.client)}),Object.defineProperty(this,"decr",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new U(r,this.opts).exec(this.client)}),Object.defineProperty(this,"decrby",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new k(r,this.opts).exec(this.client)}),Object.defineProperty(this,"del",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new I(r,this.opts).exec(this.client)}),Object.defineProperty(this,"echo",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new H(r,this.opts).exec(this.client)}),Object.defineProperty(this,"eval",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new D(r,this.opts).exec(this.client)}),Object.defineProperty(this,"evalsha",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new M(r,this.opts).exec(this.client)}),Object.defineProperty(this,"exists",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new B(r,this.opts).exec(this.client)}),Object.defineProperty(this,"expire",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new $(r,this.opts).exec(this.client)}),Object.defineProperty(this,"expireat",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new Z(r,this.opts).exec(this.client)}),Object.defineProperty(this,"flushall",{enumerable:!0,configurable:!0,writable:!0,value:r=>new G(r,this.opts).exec(this.client)}),Object.defineProperty(this,"flushdb",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new F(r,this.opts).exec(this.client)}),Object.defineProperty(this,"get",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new X(r,this.opts).exec(this.client)}),Object.defineProperty(this,"getbit",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new K(r,this.opts).exec(this.client)}),Object.defineProperty(this,"getdel",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new W(r,this.opts).exec(this.client)}),Object.defineProperty(this,"getrange",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new Y(r,this.opts).exec(this.client)}),Object.defineProperty(this,"getset",{enumerable:!0,configurable:!0,writable:!0,value:(r,i)=>new V([r,i],this.opts).exec(this.client)}),Object.defineProperty(this,"hdel",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new Q(r,this.opts).exec(this.client)}),Object.defineProperty(this,"hexists",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new q(r,this.opts).exec(this.client)}),Object.defineProperty(this,"hget",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new ee(r,this.opts).exec(this.client)}),Object.defineProperty(this,"hgetall",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new te(r,this.opts).exec(this.client)}),Object.defineProperty(this,"hincrby",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new re(r,this.opts).exec(this.client)}),Object.defineProperty(this,"hincrbyfloat",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new ne(r,this.opts).exec(this.client)}),Object.defineProperty(this,"hkeys",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new ie(r,this.opts).exec(this.client)}),Object.defineProperty(this,"hlen",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new se(r,this.opts).exec(this.client)}),Object.defineProperty(this,"hmget",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new ue(r,this.opts).exec(this.client)}),Object.defineProperty(this,"hmset",{enumerable:!0,configurable:!0,writable:!0,value:(r,i)=>new ae([r,i],this.opts).exec(this.client)}),Object.defineProperty(this,"hrandfield",{enumerable:!0,configurable:!0,writable:!0,value:(r,i,u)=>new ce([r,i,u],this.opts).exec(this.client)}),Object.defineProperty(this,"hscan",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new oe(r,this.opts).exec(this.client)}),Object.defineProperty(this,"hset",{enumerable:!0,configurable:!0,writable:!0,value:(r,i)=>new le([r,i],this.opts).exec(this.client)}),Object.defineProperty(this,"hsetnx",{enumerable:!0,configurable:!0,writable:!0,value:(r,i,u)=>new he([r,i,u],this.opts).exec(this.client)}),Object.defineProperty(this,"hstrlen",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new be(r,this.opts).exec(this.client)}),Object.defineProperty(this,"hvals",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new me(r,this.opts).exec(this.client)}),Object.defineProperty(this,"incr",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new pe(r,this.opts).exec(this.client)}),Object.defineProperty(this,"incrby",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new de(r,this.opts).exec(this.client)}),Object.defineProperty(this,"incrbyfloat",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new fe(r,this.opts).exec(this.client)}),Object.defineProperty(this,"keys",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new Ie(r,this.opts).exec(this.client)}),Object.defineProperty(this,"lindex",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new He(r,this.opts).exec(this.client)}),Object.defineProperty(this,"linsert",{enumerable:!0,configurable:!0,writable:!0,value:(r,i,u,a)=>new De([r,i,u,a],this.opts).exec(this.client)}),Object.defineProperty(this,"llen",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new Me(r,this.opts).exec(this.client)}),Object.defineProperty(this,"lmove",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new Be(r,this.opts).exec(this.client)}),Object.defineProperty(this,"lpop",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new $e(r,this.opts).exec(this.client)}),Object.defineProperty(this,"lpos",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new Ze(r,this.opts).exec(this.client)}),Object.defineProperty(this,"lpush",{enumerable:!0,configurable:!0,writable:!0,value:(r,...i)=>new Ge([r,...i],this.opts).exec(this.client)}),Object.defineProperty(this,"lpushx",{enumerable:!0,configurable:!0,writable:!0,value:(r,...i)=>new Fe([r,...i],this.opts).exec(this.client)}),Object.defineProperty(this,"lrange",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new Xe(r,this.opts).exec(this.client)}),Object.defineProperty(this,"lrem",{enumerable:!0,configurable:!0,writable:!0,value:(r,i,u)=>new Ke([r,i,u],this.opts).exec(this.client)}),Object.defineProperty(this,"lset",{enumerable:!0,configurable:!0,writable:!0,value:(r,i,u)=>new We([r,i,u],this.opts).exec(this.client)}),Object.defineProperty(this,"ltrim",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new Ye(r,this.opts).exec(this.client)}),Object.defineProperty(this,"mget",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new Ve(r,this.opts).exec(this.client)}),Object.defineProperty(this,"mset",{enumerable:!0,configurable:!0,writable:!0,value:r=>new Qe([r],this.opts).exec(this.client)}),Object.defineProperty(this,"msetnx",{enumerable:!0,configurable:!0,writable:!0,value:r=>new qe([r],this.opts).exec(this.client)}),Object.defineProperty(this,"persist",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new et(r,this.opts).exec(this.client)}),Object.defineProperty(this,"pexpire",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new tt(r,this.opts).exec(this.client)}),Object.defineProperty(this,"pexpireat",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new rt(r,this.opts).exec(this.client)}),Object.defineProperty(this,"ping",{enumerable:!0,configurable:!0,writable:!0,value:r=>new nt(r,this.opts).exec(this.client)}),Object.defineProperty(this,"psetex",{enumerable:!0,configurable:!0,writable:!0,value:(r,i,u)=>new it([r,i,u],this.opts).exec(this.client)}),Object.defineProperty(this,"pttl",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new st(r,this.opts).exec(this.client)}),Object.defineProperty(this,"publish",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new ut(r,this.opts).exec(this.client)}),Object.defineProperty(this,"randomkey",{enumerable:!0,configurable:!0,writable:!0,value:()=>new at().exec(this.client)}),Object.defineProperty(this,"rename",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new ct(r,this.opts).exec(this.client)}),Object.defineProperty(this,"renamenx",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new ot(r,this.opts).exec(this.client)}),Object.defineProperty(this,"rpop",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new lt(r,this.opts).exec(this.client)}),Object.defineProperty(this,"rpush",{enumerable:!0,configurable:!0,writable:!0,value:(r,...i)=>new ht([r,...i],this.opts).exec(this.client)}),Object.defineProperty(this,"rpushx",{enumerable:!0,configurable:!0,writable:!0,value:(r,...i)=>new bt([r,...i],this.opts).exec(this.client)}),Object.defineProperty(this,"sadd",{enumerable:!0,configurable:!0,writable:!0,value:(r,...i)=>new mt([r,...i],this.opts).exec(this.client)}),Object.defineProperty(this,"scan",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new pt(r,this.opts).exec(this.client)}),Object.defineProperty(this,"scard",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new dt(r,this.opts).exec(this.client)}),Object.defineProperty(this,"scriptExists",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new ft(r,this.opts).exec(this.client)}),Object.defineProperty(this,"scriptFlush",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new wt(r,this.opts).exec(this.client)}),Object.defineProperty(this,"scriptLoad",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new xt(r,this.opts).exec(this.client)}),Object.defineProperty(this,"sdiff",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new yt(r,this.opts).exec(this.client)}),Object.defineProperty(this,"sdiffstore",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new Ot(r,this.opts).exec(this.client)}),Object.defineProperty(this,"set",{enumerable:!0,configurable:!0,writable:!0,value:(r,i,u)=>new gt([r,i,u],this.opts).exec(this.client)}),Object.defineProperty(this,"setbit",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new vt(r,this.opts).exec(this.client)}),Object.defineProperty(this,"setex",{enumerable:!0,configurable:!0,writable:!0,value:(r,i,u)=>new Pt([r,i,u],this.opts).exec(this.client)}),Object.defineProperty(this,"setnx",{enumerable:!0,configurable:!0,writable:!0,value:(r,i)=>new jt([r,i],this.opts).exec(this.client)}),Object.defineProperty(this,"setrange",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new Ct(r,this.opts).exec(this.client)}),Object.defineProperty(this,"sinter",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new St(r,this.opts).exec(this.client)}),Object.defineProperty(this,"sinterstore",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new Et(r,this.opts).exec(this.client)}),Object.defineProperty(this,"sismember",{enumerable:!0,configurable:!0,writable:!0,value:(r,i)=>new zt([r,i],this.opts).exec(this.client)}),Object.defineProperty(this,"smismember",{enumerable:!0,configurable:!0,writable:!0,value:(r,i)=>new Tt([r,i],this.opts).exec(this.client)}),Object.defineProperty(this,"smembers",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new At(r,this.opts).exec(this.client)}),Object.defineProperty(this,"smove",{enumerable:!0,configurable:!0,writable:!0,value:(r,i,u)=>new Rt([r,i,u],this.opts).exec(this.client)}),Object.defineProperty(this,"spop",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new _t(r,this.opts).exec(this.client)}),Object.defineProperty(this,"srandmember",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new Nt(r,this.opts).exec(this.client)}),Object.defineProperty(this,"srem",{enumerable:!0,configurable:!0,writable:!0,value:(r,...i)=>new Jt([r,...i],this.opts).exec(this.client)}),Object.defineProperty(this,"sscan",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new Lt(r,this.opts).exec(this.client)}),Object.defineProperty(this,"strlen",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new Ut(r,this.opts).exec(this.client)}),Object.defineProperty(this,"sunion",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new kt(r,this.opts).exec(this.client)}),Object.defineProperty(this,"sunionstore",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new It(r,this.opts).exec(this.client)}),Object.defineProperty(this,"time",{enumerable:!0,configurable:!0,writable:!0,value:()=>new Ht().exec(this.client)}),Object.defineProperty(this,"touch",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new Dt(r,this.opts).exec(this.client)}),Object.defineProperty(this,"ttl",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new Mt(r,this.opts).exec(this.client)}),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new Bt(r,this.opts).exec(this.client)}),Object.defineProperty(this,"unlink",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new $t(r,this.opts).exec(this.client)}),Object.defineProperty(this,"zadd",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>"score"in r[1]?new y([r[0],r[1],...r.slice(2)],this.opts).exec(this.client):new y([r[0],r[1],...r.slice(2)],this.opts).exec(this.client)}),Object.defineProperty(this,"zcard",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new Zt(r,this.opts).exec(this.client)}),Object.defineProperty(this,"zcount",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new Gt(r,this.opts).exec(this.client)}),Object.defineProperty(this,"zdiffstore",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new cr(r,this.opts).exec(this.client)}),Object.defineProperty(this,"zincrby",{enumerable:!0,configurable:!0,writable:!0,value:(r,i,u)=>new Ft([r,i,u],this.opts).exec(this.client)}),Object.defineProperty(this,"zinterstore",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new Xt(r,this.opts).exec(this.client)}),Object.defineProperty(this,"zlexcount",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new Kt(r,this.opts).exec(this.client)}),Object.defineProperty(this,"zmscore",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new ar(r,this.opts).exec(this.client)}),Object.defineProperty(this,"zpopmax",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new Wt(r,this.opts).exec(this.client)}),Object.defineProperty(this,"zpopmin",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new Yt(r,this.opts).exec(this.client)}),Object.defineProperty(this,"zrange",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new Vt(r,this.opts).exec(this.client)}),Object.defineProperty(this,"zrank",{enumerable:!0,configurable:!0,writable:!0,value:(r,i)=>new Qt([r,i],this.opts).exec(this.client)}),Object.defineProperty(this,"zrem",{enumerable:!0,configurable:!0,writable:!0,value:(r,...i)=>new qt([r,...i],this.opts).exec(this.client)}),Object.defineProperty(this,"zremrangebylex",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new er(r,this.opts).exec(this.client)}),Object.defineProperty(this,"zremrangebyrank",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new tr(r,this.opts).exec(this.client)}),Object.defineProperty(this,"zremrangebyscore",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new rr(r,this.opts).exec(this.client)}),Object.defineProperty(this,"zrevrank",{enumerable:!0,configurable:!0,writable:!0,value:(r,i)=>new nr([r,i],this.opts).exec(this.client)}),Object.defineProperty(this,"zscan",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new ir(r,this.opts).exec(this.client)}),Object.defineProperty(this,"zscore",{enumerable:!0,configurable:!0,writable:!0,value:(r,i)=>new sr([r,i],this.opts).exec(this.client)}),Object.defineProperty(this,"zunionstore",{enumerable:!0,configurable:!0,writable:!0,value:(...r)=>new ur(r,this.opts).exec(this.client)}),this.client=t,this.opts=e,this.enableTelemetry=e?.enableTelemetry??!0}get json(){return{arrappend:(...t)=>new we(t,this.opts).exec(this.client),arrindex:(...t)=>new xe(t,this.opts).exec(this.client),arrinsert:(...t)=>new ye(t,this.opts).exec(this.client),arrlen:(...t)=>new Oe(t,this.opts).exec(this.client),arrpop:(...t)=>new ge(t,this.opts).exec(this.client),arrtrim:(...t)=>new ve(t,this.opts).exec(this.client),clear:(...t)=>new Pe(t,this.opts).exec(this.client),del:(...t)=>new je(t,this.opts).exec(this.client),forget:(...t)=>new Ce(t,this.opts).exec(this.client),get:(...t)=>new Se(t,this.opts).exec(this.client),mget:(...t)=>new Ee(t,this.opts).exec(this.client),numincrby:(...t)=>new ze(t,this.opts).exec(this.client),nummultby:(...t)=>new Ae(t,this.opts).exec(this.client),objkeys:(...t)=>new Te(t,this.opts).exec(this.client),objlen:(...t)=>new Re(t,this.opts).exec(this.client),resp:(...t)=>new _e(t,this.opts).exec(this.client),set:(...t)=>new Ne(t,this.opts).exec(this.client),strappend:(...t)=>new Je(t,this.opts).exec(this.client),strlen:(...t)=>new Le(t,this.opts).exec(this.client),toggle:(...t)=>new Ue(t,this.opts).exec(this.client),type:(...t)=>new ke(t,this.opts).exec(this.client)}}createScript(t){return new Sr(this,t)}};class zr{constructor(t){Object.defineProperty(this,"baseUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"retry",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.options={backend:t.options?.backend,agent:t.agent,responseEncoding:t.responseEncoding??"base64"},this.baseUrl=t.baseUrl.replace(/\/$/,""),this.headers={"Content-Type":"application/json",...t.headers},this.options.responseEncoding==="base64"&&(this.headers["Upstash-Encoding"]="base64"),typeof t?.retry=="boolean"&&t?.retry===!1?this.retry={attempts:1,backoff:()=>0}:this.retry={attempts:t?.retry?.retries??5,backoff:t?.retry?.backoff??(e=>Math.exp(e)*50)}}mergeTelemetry(t){function e(r,i,u){return u&&(r[i]?r[i]=[r[i],u].join(","):r[i]=u),r}this.headers=e(this.headers,"Upstash-Telemetry-Runtime",t.runtime),this.headers=e(this.headers,"Upstash-Telemetry-Platform",t.platform),this.headers=e(this.headers,"Upstash-Telemetry-Sdk",t.sdk)}async request(t){const e={cache:"no-store",method:"POST",headers:this.headers,body:JSON.stringify(t.body),keepalive:!0,agent:this.options?.agent,backend:this.options?.backend};let r=null,i=null;for(let a=0;a<=this.retry.attempts;a++)try{r=await fetch([this.baseUrl,...t.path??[]].join("/"),e);break}catch(o){i=o,await new Promise(c=>setTimeout(c,this.retry.backoff(a)))}if(!r)throw i??new Error("Exhausted all retries");const u=await r.json();if(!r.ok)throw new P(u.error);return this.options?.responseEncoding==="base64"?Array.isArray(u)?u.map(A):A(u):u}}function v(n){let t="";try{const e=atob(n),r=e.length,i=new Uint8Array(r);for(let u=0;u<r;u++)i[u]=e.charCodeAt(u);t=new TextDecoder().decode(i)}catch{t=n}return t}function A(n){let t;switch(typeof n.result){case"undefined":return n;case"number":{t=n.result;break}case"object":{Array.isArray(n.result)?t=n.result.map(e=>typeof e=="string"?v(e):Array.isArray(e)?e.map(v):e):t=null;break}case"string":{t=n.result==="OK"?"OK":v(n.result);break}}return{result:t,error:n.error}}const Ar="v1.20.2";typeof atob>"u"&&(global.atob=function(n){return Buffer.from(n,"base64").toString("utf-8")});class C extends Er{constructor(t){if("request"in t){super(t);return}(t.url.startsWith(" ")||t.url.endsWith(" ")||/\r|\n/.test(t.url))&&console.warn("The redis url contains whitespace or newline, which can cause errors!"),(t.token.startsWith(" ")||t.token.endsWith(" ")||/\r|\n/.test(t.token))&&console.warn("The redis token contains whitespace or newline, which can cause errors!");const e=new zr({baseUrl:t.url,retry:t.retry,headers:{authorization:`Bearer ${t.token}`},agent:t.agent,responseEncoding:t.responseEncoding});super(e,{automaticDeserialization:t.automaticDeserialization,enableTelemetry:!{}.UPSTASH_DISABLE_TELEMETRY}),this.addTelemetry({runtime:`node@${process.version}`,platform:{}.VERCEL?"vercel":{}.AWS_REGION?"aws":"unknown",sdk:`@upstash/redis@${Ar}`})}static fromEnv(t){if(typeof process?.env>"u")throw new Error('Unable to get environment variables, `process.env` is undefined. If you are deploying to cloudflare, please import from "@upstash/redis/cloudflare" instead');const e=process?.env.UPSTASH_REDIS_REST_URL;if(!e)throw new Error("Unable to find environment variable: `UPSTASH_REDIS_REST_URL`");const r=process?.env.UPSTASH_REDIS_REST_TOKEN;if(!r)throw new Error("Unable to find environment variable: `UPSTASH_REDIS_REST_TOKEN`");return new C({...t,url:e,token:r})}}console.log("redis");console.log({}.UPSTASH_REDIS_REST_URL);const d=new C({url:{}.UPSTASH_REDIS_REST_URL,token:{}.UPSTASH_REDIS_REST_TOKEN});await d.set("key","value");let f=await d.get("key");console.log(f);await d.set("key2","value2",{ex:1});await d.zadd("scores",{score:1,member:"team1"});f=await d.zrange("scores",0,100);console.log(f);await d.lpush("elements","magnesium");f=await d.lrange("elements",0,100);console.log(f);await d.hset("people",{name:"joe"});f=await d.hget("people","name");console.log(f);await d.sadd("animals","cat");f=await d.spop("animals",1);console.log(f);
