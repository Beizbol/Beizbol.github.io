import"./Theme.astro_astro_type_script_index_0_lang.84aacc82.js";const j=document.documentElement,m=document.getElementById("player"),r=document.getElementById("game"),l=document.getElementById("obstacle"),i=document.getElementById("hole"),a=document.getElementById("car");r.addEventListener("mousedown",g);r.addEventListener("mouseup",y);document.addEventListener("keydown",g);document.addEventListener("keyup",y);let p=0,f=0,d=0,o=0,n=+localStorage.getItem("best");n||(n=0);function g(t){m.classList.contains("squat")||t.key!==" "&&t.key!=="ArrowUp"&&t.key!=="w"&&t.button!==0||(f=performance.now(),m.classList.add("squat"),console.log("squat"))}function y(t){if(m.classList.contains("jump")||t.key!==" "&&t.key!=="ArrowUp"&&t.key!=="w"&&t.button!==0)return;const e=performance.now();console.log(`t: ${e}, start: ${d}`);const s=h(e);E(s);const c=I(e);if(c===null){console.log("forgiven");return}L(c),p=B(e),d=e}function E(t){j.style.setProperty("--jump-y",t+"rem"),m.classList.remove("squat"),m.classList.add("jump"),setTimeout(()=>{m.classList.remove("jump")},500)}function h(t){const e=t-f;let s=Math.min(e,1800)/50;return s=Math.min(s,16),s=Math.max(s,10),s}function I(t){const e=document.getElementById("level"),s=t-p,c=document.getElementById("dt");if(c&&(c.innerText=`dt: ${s}`),s<-500)return null;const u=105<s&&s<365;return u?(e.classList.add("good"),setTimeout(()=>{e.classList.remove("good")},400)):o>0&&(e.classList.add("fail"),setTimeout(()=>{e.classList.remove("fail")},400)),u}function L(t){const e=document.getElementById("jumps"),s=document.getElementById("best");t?o+=1:o=0,e.innerText=`Score: ${o}`,o>n&&(n=o,localStorage.setItem("best",n.toString())),s.innerText=`Best: ${n}`}function B(t){let e=Math.random()*2e3+2e3;return console.log(`next jump in ${e}ms`),setTimeout(()=>{l.classList.add("jump"),i.classList.add("jump"),a.classList.add("jump")},e),setTimeout(()=>{l.classList.remove("jump"),i.classList.remove("jump"),a.classList.add("jump")},e+1e3),t+e}L(!1);
