import{c as q}from"./confetti.module.249a7e39.js";import"./Theme.astro_astro_type_script_index_0_lang.84aacc82.js";const E=5,L=500,M=500,_=document.querySelector("[data-keyboard]"),m=document.querySelector("[data-alert]"),h=document.querySelector("[data-guess-grid]"),j=Date.now()-Date.UTC(new Date().getFullYear(),0,1),O=Math.floor(j/1e3/60/60/24),r=targetWords[O];U();p();function U(){const t=new Date,e=[t.getDate(),t.getMonth(),t.getFullYear()].join(" ");if(localStorage.getItem("date")!=e)return;const n=[...c("*")],u=localStorage.getItem("tiles").split(" ");let l=[];u.forEach((i,o,f)=>{if(n[o].dataset.letter=i,n[o].textContent=i.toUpperCase(),n[o].dataset.state="active",(o+1)%5==0){const y=f.slice(o-4,o+1).join("");l.push(y)}}),l.forEach((i,o)=>{const f=S(i);n.slice(5*o,5*o+5).forEach((N,T)=>C(N,f[T],T*L/2))}),setTimeout(()=>I(l[l.length-1]),1500)}function k(){const t=[...c('[data-state="active"]')];if(t.length!==E){d("Not enough letters"),v(t);return}const e=t.reduce((n,a)=>n+a.dataset.letter,"");if(!e)return;if(!dictionary.includes(e)){d("Not in word list"),v(t);return}g(),W();const s=S(e);t.forEach((n,a)=>{C(n,s[a],a*L/2)}),I(e)}function c(t){return[...h.querySelectorAll(t)].filter(n=>n instanceof HTMLElement).map(n=>n)}function F(t){const e=h.querySelector(t);return e instanceof HTMLElement?e:null}function p(){console.log("start"),console.log(r),document.addEventListener("click",D),document.addEventListener("keydown",A)}function g(){console.log("stop"),document.removeEventListener("click",D),document.removeEventListener("keydown",A)}function D(t){if(t.target.matches("[data-key]")){w(t.target.dataset.key);return}if(t.target.matches("[data-enter]")){k();return}}function A(t){if(t.key==="Enter"){k();return}if(t.key==="Backspace"||t.key==="Delete"){G();return}if(t.key.match(/^[a-z]$/)){w(t.key);return}}function w(t){if(c('[data-state="active"]').length>=E)return;const s=F(":not([data-letter])");s.dataset.letter=t.toLowerCase(),s.textContent=t,s.dataset.state="active"}function G(){const t=c('[data-state="active"]'),e=t[t.length-1];e!=null&&(e.textContent="",delete e.dataset.state,delete e.dataset.letter)}function W(){const s=[...c("[data-letter]")].map((u,l,i)=>u.dataset.letter).join(" ");localStorage.setItem("tiles",s);const n=new Date,a=[n.getDate(),n.getMonth(),n.getFullYear()].join(" ");localStorage.setItem("date",a)}function I(t){if(t===r){d("You Win",5e3),Y(),q(),g();return}h.querySelectorAll(":not([data-letter])").length===0&&(d(r.toUpperCase(),null),g()),p()}function S(t){if(t===r)return Array(5).fill("correct");let e=Array(5).fill("wrong-location"),s=r.split("");for(let n=0;n<t.length;n++)r.charAt(n)===t.charAt(n)?(e[n]="correct",s[n]=""):s.includes(t[n])||(e[n]="wrong");return e}function C(t,e,s){const n=t.dataset.letter,a=_.querySelector(`[data-key="${n}"i]`);setTimeout(()=>{t.classList.add("flip")},s),t.addEventListener("transitionend",()=>{t.classList.remove("flip"),a.classList.add(e),t.dataset.state=e},{once:!0})}function d(t,e=5e3){m.textContent=t,m.classList.remove("hide"),e!=null&&setTimeout(()=>{m.classList.add("hide")},e)}function v(t){t.forEach(e=>{e.classList.add("shake"),e.addEventListener("animationend",()=>{e.classList.remove("shake")},{once:!0})})}function Y(){c("*").forEach((e,s)=>{setTimeout(()=>{e.classList.add("dance"),e.addEventListener("animationend",()=>{e.classList.remove("dance")},{once:!0})},s*M/5)})}
