import"./hoisted.CmKvcf_A.js";const k=["C","D","H","S"],S=["","A","2","3","4","5","6","7","8","9","10","J","Q","K"],E={A:11,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,J:10,Q:10,K:10};class w{faceUp=!1;suit;rank;get score(){return E[this.rank]}constructor(e,s){this.suit=k[e],this.rank=S[s]}toString(){return`${this.suit}-${this.rank}`}flip(){this.faceUp=!this.faceUp}show(){this.faceUp=!0}hide(){this.faceUp=!1}}class b{cards=[];constructor(){for(let e=0;e<4;e++)for(let s=1;s<=13;s++)this.cards.push(new w(e,s))}shuffle(e=1e3){const s=this.cards.length-1;for(let c=0;c<e;c++){const n=c%s,i=this.cards[n],d=Math.floor(Math.random()*s);this.cards[n]=this.cards[d],this.cards[d]=i}}draw(e=2){return this.cards.splice(0,e)}toString(){return this.cards.map(e=>e.toString()).join(" ")}}class r{chips;deck;player=[];dealer=[];get playerScore(){return r.count(this.player)}get dealerScore(){return r.count(this.dealer)}constructor(e){this.chips=e,this.deck=new b}deal(){if(this.chips<1){alert("You're out of chips!");return}this.deck.shuffle(),this.player=this.deck.draw(2),this.dealer=this.deck.draw(2)}hit(){const e=this.deck.draw(1)[0];this.player.push(e),console.log("hit player:",this.player)}stand(){const e=r.count(this.dealer);console.log("dealer:",this.dealer,e);const s=r.count(this.player);console.log("player:",this.player,s)}static count(e){let s=0;for(let c=0;c<e.length;c++)s+=e[c].score;return s}}function L(){let m=100;const e=new r(m),s=document.getElementById("bust");s.onclose=l;const c=document.getElementById("win");c.onclose=l;const n=document.getElementById("bj");n.onclose=l;const i=document.getElementById("lose");i.onclose=l;const d=document.getElementById("draw");d.onclose=l;const p=document.getElementById("backPicker");localStorage.backTheme&&(p.value=localStorage.backTheme,document.documentElement.dataset.cardBack=localStorage.backTheme),p.addEventListener("change",()=>{const t=p.value;localStorage.backTheme=t,console.log("color theme saved.",t),document.documentElement.dataset.cardBack=t});const h=document.getElementById("hit");h.addEventListener("click",()=>{e.hit();const o=g.querySelector(".card").cloneNode(!0);o.dataset.card=e.player[e.player.length-1].toString(),g.appendChild(o),console.log(e.playerScore),e.playerScore>21&&(h.classList.toggle("hidden",!0),u.classList.toggle("hidden",!0),s.showModal()),e.playerScore===21&&(h.classList.toggle("hidden",!0),u.classList.toggle("hidden",!0),n.showModal())});function l(){y.classList.toggle("hidden",!1);const t=g.querySelectorAll(".card");for(let a=t.length-1;a>1;a--)t[a].remove();t[0].dataset.card="back",t[1].dataset.card="back";const o=f.querySelectorAll(".card");for(let a=o.length-1;a>1;a--)o[a].remove();o[0].dataset.card="back",o[1].dataset.card="back"}const u=document.getElementById("stand");u.addEventListener("click",()=>{e.stand();const t=e.dealerScore,o=e.playerScore;t>21&&(console.log("dealer bust"),c.showModal()),t===o&&(console.log("draw"),d.showModal()),t>o&&(console.log("dealer win"),i.showModal()),t<o&&(console.log("player bust"),c.showModal()),l()});const f=document.getElementById("dealer"),g=document.getElementById("player"),y=document.getElementById("deal");y.addEventListener("click",()=>{y.classList.toggle("hidden",!0),h.classList.toggle("hidden",!1),u.classList.toggle("hidden",!1),e.deal();const t=f.querySelectorAll(".card");t[1].dataset.card=e.dealer[1].toString();const o=g.querySelectorAll(".card");o[0].dataset.card=e.player[0].toString(),o[1].dataset.card=e.player[1].toString()}),document.getElementById("themes").addEventListener("click",()=>{document.getElementById("ui").classList.toggle("hidden")})}document.addEventListener("astro:page-load",L);
