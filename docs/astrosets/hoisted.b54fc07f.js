import{c as H}from"./confetti.module.c4688150.js";import"./hoisted.61ae0013.js";function p(){function m(){l.classList.contains("tilted")?l.classList.remove("tilted"):l.classList.add("tilted")}function L(){if(f.checked){document.querySelectorAll(".slot").forEach(t=>{t.classList.add("backface-on")}),l.style.animation="tiltin 2s 1",setTimeout(m,2e3);return}l.style.animation="tiltout 2s 1",setTimeout(()=>{m(),document.querySelectorAll(".slot").forEach(t=>{t.classList.contains("backface-on")&&t.classList.remove("backface-on")})},1900)}const S=document.querySelector("dialog"),l=document.getElementById("rotate"),f=document.getElementById("xray");f.addEventListener("click",L),document.getElementById("spin").addEventListener("click",k);const d=12,y=document.getElementById("ring1"),h=document.getElementById("ring2"),I=document.getElementById("ring3"),w=document.getElementById("ring4"),E=document.getElementById("ring5");function i(t){const e=t.querySelectorAll(".slot");for(var n=0;n<d;n++)e[n].classList.add("pos-"+n)}function v(t){for(let e=0;e<13;e++){const n="spin-"+e;t.classList.contains(n)&&t.classList.remove(n)}}function b(t){let e=1,n=1;t.length-1;let s=t[0];const o=Math.floor(d/2);for(let c=1;c<t.length;c++){const r=t[c];r%o===s%o?n+=1:n=1,e=Math.max(e,n),s=r}return e}function q(t){switch(b(t)){case 5:return console.log("5 in a row"),500;case 4:return console.log("4 in a row"),250;case 3:return console.log("3 in a row"),100;case 2:return console.log("2 in a row"),20;default:return console.log("L"),0}}function B(t=5){const e=[];for(let n=0;n<t;n++){const s=Math.floor(Math.random()*d);e.push(s)}return e}function A(t,e=1){for(;;){const n=B(t),s=q(n),o={seeds:n,score:s};if(e<.3){if(s>40)return o}else if(e<.5){if(s>0)return o}else return o}}function T(t,e){t.querySelectorAll(".slot")[e].classList.add("win")}function x(t){const e=t.querySelectorAll(".slot");for(let n=0;n<e.length;n++){const s=e[n];s.classList.contains("win")&&s.classList.remove("win")}}const u=document.querySelector("[data-alert]");function M(t,e=5e3){u.textContent=t,u.classList.remove("hide"),e!=null&&setTimeout(()=>{u.classList.add("hide")},e)}function _(t){M(`Winner! +${t}`,2500),t>200&&H()}function k(){const t=document.querySelector(".bet.placed"),e=parseInt(t.innerHTML);if(e>a){S.showModal();return}g(-e);const n=document.querySelectorAll(".ring"),s=A(n.length);for(let o=0;o<n.length;o++){const c=n[o],r=s.seeds[o];v(c),x(c),c.classList.add("spin"),setTimeout(()=>{c.classList.remove("spin"),c.classList.add("spin-"+r),T(c,r)},3e3+o*250)}setTimeout(()=>{if(s.score>0){const o=s.score*Math.floor(e/50);console.log("win",o),g(o),_(o)}},4500)}function P(){let t=parseInt(localStorage.getItem("slots-pts")||"2500");const e=parseInt(localStorage.getItem("game-wins")||"0"),n=parseInt(localStorage.getItem("prev-wins")||"0");return t+=(e-n)*2500,localStorage.setItem("slots-pts",t.toString()),localStorage.setItem("prev-wins",e.toString()),t}function W(){const t=document.querySelectorAll(".bet");for(let e=0;e<t.length;e++){const n=t[e];n.classList.contains("placed")&&n.classList.remove("placed")}}function j(){const t=document.querySelectorAll(".bet");t[0].classList.add("placed");for(let e=0;e<t.length;e++){const n=t[e];n.addEventListener("click",()=>{W(),n.classList.add("placed")})}}function g(t){a+=t;const e=document.getElementById("score");e.innerHTML=a.toString(),localStorage.setItem("slots-pts",a.toString())}i(y),i(h),i(I),i(w),i(E),j();let a=0;g(P())}p();document.addEventListener("astro:after-swap",()=>{console.log("astro page load"),p()});
