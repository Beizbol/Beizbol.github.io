import{c as B}from"./confetti.module.BxKCmZ95.js";function R(){const n=Array.from({length:16},()=>new Array(9).fill(!1)),i=[3,4,5];let l=15;n[l][3]=!0,n[l][4]=!0,n[l][5]=!0,l-=1;let g=!0,a=!1,f=200,r=!0,s=0;const m={bg:"#102",cell:"#f02",grid:"#208",bronze:"#941",silver:"#999",gold:"#b80",bronzeW:"#b62",silverW:"#bbb",goldW:"#FC0"},u={bg:"#001",cell:"#300",grid:"#113",bronze:"#321",silver:"#444",gold:"#540",bronzeW:"#b62",silverW:"#aaa",goldW:"#d90"};let o=r?u:m;const w=document.getElementById("gameOver"),b=document.getElementById("canvas"),t=b.getContext("2d");document.addEventListener("keydown",e=>{switch(e.key){case" ":e.preventDefault(),r?r=!1:a=!0;break}}),b.addEventListener("touchstart",()=>{r?r=!1:a=!0});const v=document.getElementById("bw");v.innerText=localStorage.getItem("stack-wins-bronze")||"0";const y=document.getElementById("sw");y.innerText=localStorage.getItem("stack-wins-silver")||"0";const h=document.getElementById("gw");h.innerText=localStorage.getItem("stack-wins-gold")||"0";let c={b:parseInt(v.innerText),s:parseInt(y.innerText),g:parseInt(h.innerText)};const I=document.getElementById("bronze"),x=document.getElementById("silver"),p=document.getElementById("gold"),z=()=>{console.log("game over"),r=!0,s>=1&&(I.innerText="🎗️",c.b+=1),s>=2&&(x.innerText="🏅",c.s+=1),s===3&&(p.innerText="🏆",c.g+=1,B()),w.showModal()};w.onclose=()=>{localStorage.setItem("stack-wins-bronze",c.b.toString()),localStorage.setItem("stack-wins-silver",c.s.toString()),localStorage.setItem("stack-wins-gold",c.g.toString()),I.innerText="-",x.innerText="-",p.innerText="-",document.location.reload()};const T=()=>{if(a){a=!1;for(let e=0;e<9;e++)if(n[l][e]&&!n[l+1][e]&&(n[l][e]=!1,i.pop(),console.log(i.length),i.length===0)){z();return}if(l===8&&n[8].includes(!0)&&(s=1),l===4&&n[4].includes(!0)&&(s=2),l===0&&n[0].includes(!0)&&(s=3),l===0){z();return}l-=1,f-=8}for(let e=0;e<9;e++)n[l][e]=!1;i.at(0)===0&&(g=!1),i.at(-1)===8&&(g=!0);for(let e=0;e<i.length;e++)i[e]+=g?-1:1,n[l][i[e]]=!0},S=()=>{r||T(),o=r?u:m,t.fillStyle=o.grid,t.fillRect(0,0,t.canvas.width,t.canvas.height),t.fillStyle=s>2?o.goldW:o.gold,t.fillRect(0,0,t.canvas.width,34),t.fillStyle=s>1?o.silverW:o.silver,t.fillRect(0,128,t.canvas.width,34),t.fillStyle=s>0?o.bronzeW:o.bronze,t.fillRect(0,256,t.canvas.width,34);for(let e=0;e<n.length;e++)for(let d=0;d<n[e].length;d++){const E=n[e][d],k=d*32+2,W=e*32+2;t.fillStyle=E?o.cell:o.bg,t.fillRect(k,W,30,30)}setTimeout(S,f)};S()}document.addEventListener("astro:page-load",R);
