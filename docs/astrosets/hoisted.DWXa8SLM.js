import{c as A}from"./confetti.module.BxKCmZ95.js";import"./hoisted.BrocnPgX.js";class D extends HTMLElement{constructor(o){super(),this.dataset.card=o,this.classList.add("card")}}customElements.define("playing-card",D);async function r(u){return await new Promise(o=>setTimeout(o,u))}function L(){const u=document.getElementById("board"),o=u.querySelectorAll(".column"),n=document.getElementById("cells"),t=document.getElementById("piles"),h=document.getElementById("reset"),d={held:null,cells:[],piles:[[],[],[],[]],board:[[],[],[],[],[],[],[],[]]};function H(){y.disabled=!1,d.piles=[[],[],[],[]],d.cells=[],t.querySelectorAll(".cell").forEach(l=>{l.innerHTML=""}),n.querySelectorAll(".cell").forEach(l=>{l.innerHTML=""});const c=["H-2","C-2","S-2","D-2","D-4","C-4","H-4","S-4","S-A","D-A","C-A","H-A","S-3","D-3","C-3","H-3","C-6","H-6","S-6","D-6","H-7","H-8","D-7","S-7","S-5","D-5","C-5","H-5","C-7","C-8","C-9","C-10","D-8","D-9","D-10","D-J","D-Q","D-K","H-9","H-10","S-8","S-9","H-J","H-Q","H-K","S-10","C-J","C-Q","C-K","S-J","S-Q","S-K"];c.reverse(),d.board=[[],[],[],[],[],[],[],[]];for(let l=0;l<c.length;l++){const s=c[l],e=document.createElement("div");e.classList.add("card"),e.dataset.card=s,d.board[l%8].push(e)}}async function p(c=[0,0,0,0]){const l=n.querySelectorAll(".cell"),s=t.querySelectorAll(".cell");for(let e=0;e<l.length;e++){const i=c[e],f=l[e].lastElementChild;console.log("idx",e,"shift",i,"PC",s);const m=s[e+i].lastElementChild;m&&s[e+i].replaceChild(f,m),await r(100)}}async function a(c,l,s,e=-1){const i=o[l].querySelectorAll(".card"),f=i[i.length-1];f.dataset.letter=c;const m=s.querySelectorAll(".cell"),S=o[l].removeChild(f),C=e>=0?m[e]:m[l%4];C.lastElementChild?C.replaceChild(S,C.lastElementChild):C.appendChild(S),await r(200)}async function w(c=!1){const l=n.querySelectorAll(".card");for(let e=0;e<l.length;e++){const i=l[e];c?(i.classList.remove("letter"),i.innerText=""):(i.classList.add("letter"),i.innerText=i.dataset.letter||""),await r(100)}const s=t.querySelectorAll(".card");for(let e=0;e<s.length;e++){const i=s[e];c?(i.classList.remove("letter"),i.innerText=""):(i.classList.add("letter"),i.innerText=i.dataset.letter||""),await r(100)}}async function E(){y.disabled=!0,h.disabled=!0,await a("H",0,n),await a("A",1,n),await a("P",2,n),await a("P",3,n),await a("Y",0,t),await a("",1,t),await a("",2,t),await a("",3,t),await w(),await r(1e3),await w(!0),await p([2,2,-1,-3]),await a("F",4,n),await a("A",5,n),await a("T",6,n),await a("H",7,n),await a("E",4,t),await a("R",5,t),await a("'",6,t),await a("S",7,t),await w(),await r(1e3),await w(!0),await p([3,-1,-1,-1]),await a("D",0,n),await a("A",1,n),await a("Y",2,n),await a("!",3,n),await a("",0,t),await a("",1,t),await a("",2,t),await a("",3,t),await w(),await r(1e3),await w(!0),await p([2,2,-2,-2]),await a("",4,t,3),await a("",5,t,2),await a("",7,t,0),await a("",6,t,0),await a("",7,t,1),await a("",6,t,1),await a("",5,t,1),await a("",4,t,1),await a("",3,t,2),await a("",2,t,2),await a("",1,t,2),await a("",0,t,2),await a("",7,t,2),await a("",6,t,2),await a("",5,t,0),await a("",4,t,0),await a("",3,t,3),await a("",2,t,3),await a("",1,t,0),await a("",0,t,0),await a("",7,t,0),await a("",6,t,3),await a("",5,t,1),await a("",4,t,1),await a("",3,t,1),await a("",2,t,3),await a("",1,t,3),await a("",0,t,3),h.disabled=!1,A()}function g(){const c=u.querySelectorAll(".column");for(let l=0;l<c.length;l++){const s=c[l];s.innerHTML="";const e=d.board[l];for(let i=0;i<e.length;i++)s.appendChild(e[i])}}h.addEventListener("click",()=>{H(),console.log("state",d),g()});const y=document.getElementById("play");y.addEventListener("click",E)}document.addEventListener("astro:page-load",L);
