import{c as P}from"./confetti.module.c4688150.js";import"./hoisted.61ae0013.js";function f(){function g(){l.classList.contains("tilted")?l.classList.remove("tilted"):l.classList.add("tilted")}function p(){if(m.checked){document.querySelectorAll(".slot").forEach(t=>{t.classList.add("backface-on")}),l.style.animation="tiltin 2s 1",setTimeout(g,2e3);return}l.style.animation="tiltout 2s 1",setTimeout(()=>{g(),document.querySelectorAll(".slot").forEach(t=>{t.classList.contains("backface-on")&&t.classList.remove("backface-on")})},1900)}const l=document.getElementById("rotate"),m=document.getElementById("xray");m.addEventListener("click",p),document.getElementById("spin").addEventListener("click",k);const d=12,L=document.getElementById("ring1"),S=document.getElementById("ring2"),y=document.getElementById("ring3"),h=document.getElementById("ring4"),I=document.getElementById("ring5");function i(t){const e=t.querySelectorAll(".slot");for(var n=0;n<d;n++)e[n].classList.add("pos-"+n)}function E(t){for(let e=0;e<13;e++){const n="spin-"+e;t.classList.contains(n)&&t.classList.remove(n)}}function w(t){let e=1,n=1;t.length-1;let s=t[0];const o=Math.floor(d/2);for(let c=1;c<t.length;c++){const r=t[c];r%o===s%o?n+=1:n=1,e=Math.max(e,n),s=r}return e}function v(t){switch(w(t)){case 5:return console.log("5 in a row"),500;case 4:return console.log("4 in a row"),250;case 3:return console.log("3 in a row"),100;case 2:return console.log("2 in a row"),20;default:return console.log("L"),0}}function b(t=5){const e=[];for(let n=0;n<t;n++){const s=Math.floor(Math.random()*d);e.push(s)}return e}function B(t,e=1){for(;;){const n=b(t),s=v(n),o={seeds:n,score:s};if(e<.3){if(s>40)return o}else if(e<.5){if(s>0)return o}else return o}}function q(t,e){t.querySelectorAll(".slot")[e].classList.add("win")}function A(t){const e=t.querySelectorAll(".slot");for(let n=0;n<e.length;n++){const s=e[n];s.classList.contains("win")&&s.classList.remove("win")}}function T(t){t>200&&P()}function k(){const t=document.querySelector(".bet.placed"),e=parseInt(t.innerHTML);if(e>a){alert("Not enough points!");return}u(-e);const n=document.querySelectorAll(".ring"),s=B(n.length);for(let o=0;o<n.length;o++){const c=n[o],r=s.seeds[o];E(c),A(c),c.classList.add("spin"),setTimeout(()=>{c.classList.remove("spin"),c.classList.add("spin-"+r),q(c,r)},3e3+o*250)}setTimeout(()=>{s.score>0&&(console.log("win",s.score),u(s.score),T(s.score))},4500)}function x(){let t=parseInt(localStorage.getItem("slots-pts")||"2500");const e=parseInt(localStorage.getItem("game-wins")||"0"),n=parseInt(localStorage.getItem("prev-wins")||"0");return t+=(e-n)*2500,localStorage.setItem("slots-pts",t.toString()),localStorage.setItem("prev-wins",e.toString()),t}function _(){const t=document.querySelectorAll(".bet");for(let e=0;e<t.length;e++){const n=t[e];n.classList.contains("placed")&&n.classList.remove("placed")}}function M(){const t=document.querySelectorAll(".bet");t[0].classList.add("placed");for(let e=0;e<t.length;e++){const n=t[e];n.addEventListener("click",()=>{_(),n.classList.add("placed")})}}function u(t){a+=t;const e=document.getElementById("score");e.innerHTML=a.toString(),localStorage.setItem("slots-pts",a.toString())}i(L),i(S),i(y),i(h),i(I),M();let a=0;u(x())}f();document.addEventListener("astro:after-swap",()=>{console.log("astro page load"),f()});
