import"./hoisted.Yj7bA2Eb.js";async function i(){const s="127.0.0.1:8090",n=document.getElementById("signin"),m=document.getElementById("set"),c=document.getElementById("tally"),d=document.getElementById("team"),u=document.getElementById("btnAdd");u.onclick=async()=>{const o=localStorage.getItem("pushup_name");if(!o){n.showModal();return}let t=m.value;const e=await fetch("http://"+s+"/tally/"+o+"/"+t);if(!e.ok){console.error("failed to send tally");return}const a=await e.json();console.log(a),c.textContent=a.tally,d.textContent=a.total},document.getElementById("btnName").addEventListener("click",()=>{const t=n.querySelector("input").value;localStorage.setItem("pushup_name",t),n.close()}),n.addEventListener("close",()=>{console.log("closed")});const l=localStorage.getItem("pushup_name");if(l){console.log("logged in as:",l);const o=document.getElementById("lblName");o.textContent=l;const t=await fetch("http://"+s+"/pushups/"+l);if(console.log(t),t.ok){const e=await t.json();console.log(e),c.textContent=e.tally,d.textContent=e.total}return}n.showModal()}document.addEventListener("astro:page-load",i);
